{% extends 'root.html' %}
{% load url_filters %}


{% block content %}

    <h1>{{ source.name }}</h1>

    {% if source.description %}
    <p>
        {{ source.description }}
    </p>
    {% endif %}

    <ul class="source_details">
        {% if source.last_update %}<li>Updated: {{ source.last_update }}</li>{% endif %}
        {% if source.profile %}<li>Profile: <a href="{{ source.profle }}">{{ source.profile|url_for_display }}</a></li>{% endif %}
        {% if source.website %}<li>Site: <a href="{{ source.website }}">{{ source.website|url_for_display }}</a></li>{% endif %}
    </ul>

    {% if items %}
        <p>Last check: {{ source.last_check }}</p>
    {% ifequal grouping 'daily' %}
        <ul>
            {% for item in items %}
                {% ifchanged item.pub_date|date:"y-d-m" %}
                    {% if not forloop.first %}</ul></li>{% endif %}
                    <li>{{ item.pub_date|date:"" }}
                        <ul>
                {% endifchanged %}
                            <li><a href="{{ item.get_absolute_url }}">{{ item.title }}</a> ({{ item.pub_date|date:"h:i A"|lower }})</a></li>
            {% endfor %}
        </ul>
    {% else %}
    <ul>
        {% for item in items %}
            <li><a href="{{ item.get_absolute_url }}">{{ item.title }}</a> ({{ item.pub_date|date:"y-d-m h:i A"|lower }})</a></li>
        {% endfor %}
    </ul>
    {% endifequal %}

    {% else %}
        <p>No items retrieved from this source.</p>
    {% endif %}

{% endblock %}